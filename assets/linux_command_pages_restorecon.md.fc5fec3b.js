import{_ as s,c as n,o as a,a as l}from"./app.f6b8b16b.js";const y=JSON.parse('{"title":"restorecon","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u8865\u5145\u8BF4\u660E","slug":"\u8865\u5145\u8BF4\u660E","link":"#\u8865\u5145\u8BF4\u660E","children":[{"level":3,"title":"\u8BED\u6CD5","slug":"\u8BED\u6CD5","link":"#\u8BED\u6CD5","children":[]},{"level":3,"title":"\u9009\u9879","slug":"\u9009\u9879","link":"#\u9009\u9879","children":[]},{"level":3,"title":"\u5B9E\u4F8B","slug":"\u5B9E\u4F8B","link":"#\u5B9E\u4F8B","children":[]}]}],"relativePath":"linux/command/pages/restorecon.md","lastUpdated":1666509709000}'),e={name:"linux/command/pages/restorecon.md"},p=l(`<h1 id="restorecon" tabindex="-1">restorecon <a class="header-anchor" href="#restorecon" aria-hidden="true">#</a></h1><p>\u6062\u590D\u6587\u4EF6\u7684\u5B89\u5168\u4E0A\u4E0B\u6587</p><h2 id="\u8865\u5145\u8BF4\u660E" tabindex="-1">\u8865\u5145\u8BF4\u660E <a class="header-anchor" href="#\u8865\u5145\u8BF4\u660E" aria-hidden="true">#</a></h2><p><strong>restorecon\u547D\u4EE4</strong> \u7528\u6765\u6062\u590DSELinux\u6587\u4EF6\u5C5E\u6027\u5373\u6062\u590D\u6587\u4EF6\u7684\u5B89\u5168\u4E0A\u4E0B\u6587\u3002</p><h3 id="\u8BED\u6CD5" tabindex="-1">\u8BED\u6CD5 <a class="header-anchor" href="#\u8BED\u6CD5" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">restorecon </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-iFnrRv</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-e excludedir </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-o filename </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-f filename </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> pathname...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="\u9009\u9879" tabindex="-1">\u9009\u9879 <a class="header-anchor" href="#\u9009\u9879" aria-hidden="true">#</a></h3><div class="language-shell line-numbers-mode"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#A6ACCD;">-i\uFF1A\u5FFD\u7565\u4E0D\u5B58\u5728\u7684\u6587\u4EF6\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-f\uFF1Ainfilename \u6587\u4EF6 infilename \u4E2D\u8BB0\u5F55\u8981\u5904\u7406\u7684\u6587\u4EF6\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-e\uFF1Adirectory \u6392\u9664\u76EE\u5F55\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-R/-r\uFF1A\u9012\u5F52\u5904\u7406\u76EE\u5F55\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-n\uFF1A\u4E0D\u6539\u53D8\u6587\u4EF6\u6807\u7B7E\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-o/outfilename\uFF1A\u4FDD\u5B58\u6587\u4EF6\u5217\u8868\u5230 outfilename\uFF0C\u5728\u6587\u4EF6\u4E0D\u6B63\u786E\u60C5\u51B5\u4E0B\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-v\uFF1A\u5C06\u8FC7\u7A0B\u663E\u793A\u5230\u5C4F\u5E55\u4E0A\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">-F\uFF1A\u5F3A\u5236\u6062\u590D\u6587\u4EF6\u5B89\u5168\u8BED\u5883\u3002</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="\u5B9E\u4F8B" tabindex="-1">\u5B9E\u4F8B <a class="header-anchor" href="#\u5B9E\u4F8B" aria-hidden="true">#</a></h3><p>\u5047\u8BBECentOS\u5B89\u88C5\u4E86apache\uFF0C\u7F51\u9875\u9ED8\u8BA4\u7684\u4E3B\u76EE\u5F55\u662F<code>/var/www/html</code>\uFF0C\u6211\u4EEC\u7ECF\u5E38\u9047\u5230\u8FD9\u6837\u7684\u95EE\u9898\uFF0C\u5728\u5176\u4ED6\u76EE\u5F55\u4E2D\u521B\u5EFA\u4E86\u4E00\u4E2A\u7F51\u9875\u6587\u4EF6\uFF0C\u7136\u540E\u7528mv\u79FB\u52A8\u5230\u7F51\u9875\u9ED8\u8BA4\u76EE\u5F55<code>/var/www/html</code>\u4E2D\uFF0C\u4F46\u662F\u5728\u6D4F\u89C8\u5668\u4E2D\u5374\u6253\u4E0D\u5F00\u8FD9\u4E2A\u6587\u4EF6\uFF0C\u8FD9\u5F88\u53EF\u80FD\u662F\u56E0\u4E3A\u8FD9\u4E2A\u6587\u4EF6\u7684SELinux\u914D\u7F6E\u4FE1\u606F\u662F\u7EE7\u627F\u539F\u6765\u90A3\u4E2A\u76EE\u5F55\u7684\uFF0C\u4E0E<code>/var/www/html</code>\u76EE\u5F55\u4E0D\u540C\uFF0C\u4F7F\u7528mv\u79FB\u52A8\u7684\u65F6\u5019\uFF0C\u8FD9\u4E2ASELinux\u914D\u7F6E\u4FE1\u606F\u4E5F\u4E00\u8D77\u79FB\u52A8\u8FC7\u6765\u4E86\uFF0C\u4ECE\u800C\u5BFC\u81F4\u65E0\u6CD5\u6253\u5F00\u9875\u9762\uFF0C\u5177\u4F53\u8BF7\u770B\u4E0B\u9762\u7684\u5B9E\u4F8B\uFF1A</p><p>\u4F7F\u7528CentOS\u4E3E\u4F8B,\u5982\u679C\u9ED8\u8BA4\u6CA1\u6709\u5B89\u88C5apache\uFF0C\u786E\u4FDD\u7F51\u7EDC\u8FDE\u63A5\uFF0C\u4F7F\u7528\u4E0B\u9762\u7684\u547D\u4EE4\u5B89\u88C5</p><div class="language-shell line-numbers-mode"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com </span><span style="color:#89DDFF;">~]</span><span style="color:#676E95;"># yum install httpd</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;"># \u6211\u4EEC\u5728root\u7684\u5BB6\u76EE\u5F55\u65B0\u5EFA\u4E00\u4E2Ahtml\u6587\u4EF6 </span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com </span><span style="color:#89DDFF;">~]</span><span style="color:#676E95;"># pwd</span></span>
<span class="line"><span style="color:#A6ACCD;">/root</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com </span><span style="color:#89DDFF;">~]</span><span style="color:#676E95;"># vi index.html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u968F\u4FBF\u8F93\u5165\u4E00\u6BB5\u6587\u5B57\uFF0C\u4FDD\u5B58\u9000\u51FA </span></span>
<span class="line"><span style="color:#A6ACCD;">welcome to www.jsdig.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u8FD9\u4E2A\u6587\u4EF6mv\u5230\u7F51\u9875\u9ED8\u8BA4\u76EE\u5F55\u4E0B </span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com </span><span style="color:#89DDFF;">~]</span><span style="color:#676E95;"># mv index.html /var/www/html/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># </span></span>
<span class="line"><span style="color:#676E95;"># \u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u4F7F\u7528firefox\u6D4F\u89C8\u5668\u8F93\u5165127.0.0.1/index.html\u53D1\u73B0\u6253\u4E0D\u5F00\uFF0C</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u770B\u4E00\u4E0BSELinux\u7684\u65E5\u5FD7\u6587\u4EF6\uFF0C\u53D1\u73B0\u4E86\u4E0B\u9762\u8FD9\u4E00\u6BB5\u62A5\u9519\u4FE1\u606F\uFF0C\u4ECE\u8FD9\u4E2A\u62A5\u9519\u4FE1\u606F\u4E0D\u96BE\u770B\u51FA\uFF0C</span></span>
<span class="line"><span style="color:#676E95;"># \u8FDB\u7A0Bhttpd\u8BBF\u95EE\u7F51\u9875\u4E3B\u76EE\u5F55\u4E2D\u7684index.html\u65F6\u88ABSELinux\u963B\u6B62\uFF0C\u539F\u56E0\u662F\u56E0\u4E3A\uFF0CSELinux\u914D\u7F6E\u4FE1\u606F\u4E0D\u6B63\u786E,</span></span>
<span class="line"><span style="color:#676E95;"># \u6B63\u786E\u7684SELinux\u914D\u7F6E\u4FE1\u606F\u5E94\u8BE5\u662Fscontext=\u540E\u9762\u7684\u90E8\u5206\uFF0C</span></span>
<span class="line"><span style="color:#676E95;"># \u800Cindex.html\u6587\u4EF6\u7684SELinux\u914D\u7F6E\u4FE1\u606F\u5374\u662Ftcontext=\u540E\u9762\u7684\u90E8\u5206\uFF0C</span></span>
<span class="line"><span style="color:#676E95;"># \u4ECEtcontext=\u7684\u7B2C\u4E09\u6BB5\u201Cadmin_home_t\u201D\u4E0D\u96BE\u770B\u51FA\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u7684SELinux\u914D\u7F6E\u4FE1\u606F\u662Froot\u7528\u6237\u5BB6\u76EE\u5F55\u7684\u3002</span></span>
<span class="line"><span style="color:#676E95;"># </span></span>
<span class="line"><span style="color:#A6ACCD;">type=AVC msg=audit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">1378974214.610:465</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">: avc:  denied  </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> open } </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;">  pid=2359 comm=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">httpd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> path=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/html/index.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> dev=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">sda1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> ino=1317685 scontext=system_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>\u4F7F\u7528ls -Z\u4E5F\u53EF\u4EE5\u770B\u51FA,\u6587\u4EF6\u548C\u76EE\u5F55\u7684SELinux\u4FE1\u606F\u4E0D\u5339\u914D</p><div class="language-shell line-numbers-mode"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com html</span><span style="color:#89DDFF;">]</span><span style="color:#676E95;"># ls -Z /var/www/html/</span></span>
<span class="line"><span style="color:#A6ACCD;">.... unconfined_u:object_r:admin_home_t:s0 index.html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com html</span><span style="color:#89DDFF;">]</span><span style="color:#676E95;"># ls -Zd /var/www/html/</span></span>
<span class="line"><span style="color:#A6ACCD;">.... system_u:object_r:httpd_sys_content_t:s0 /var/www/html/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4F7F\u7528restorecon\u6765\u6062\u590D\u7F51\u9875\u4E3B\u76EE\u5F55\u4E2D\u6240\u6709\u6587\u4EF6\u7684SELinux\u914D\u7F6E\u4FE1\u606F(\u5982\u679C\u76EE\u6807\u4E3A\u4E00\u4E2A\u76EE\u5F55\uFF0C\u53EF\u4EE5\u6DFB\u52A0-R\u53C2\u6570\u9012\u5F52)</p><div class="language-shell line-numbers-mode"><button class="copy"></button><span class="lang">shell</span><pre><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@jsdig.com html</span><span style="color:#89DDFF;">]</span><span style="color:#676E95;"># restorecon -R /var/www/html/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div>`,16),o=[p];function r(c,t,i,d,m,D){return a(),n("div",null,o)}const b=s(e,[["render",r]]);export{y as __pageData,b as default};
